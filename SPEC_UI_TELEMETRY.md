# Specification: UI Enhancements & Telemetry Integration

**Document Version**: 1.0  
**Created**: January 2026  
**Status**: Draft  
**Author**: Capstone Team  

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Goals & Objectives](#2-goals--objectives)
3. [UI Enhancements Specification](#3-ui-enhancements-specification)
4. [Telemetry Specification](#4-telemetry-specification)
5. [Technical Requirements](#5-technical-requirements)
6. [Implementation Phases](#6-implementation-phases)
7. [Success Metrics](#7-success-metrics)
8. [Risks & Mitigations](#8-risks--mitigations)
9. [Open Questions](#9-open-questions)

---

## 1. Executive Summary

This specification outlines two major enhancements to the IIITH Chatbot:

1. **UI Enhancements**: Modernize the Streamlit interface with improved aesthetics, better UX patterns, and enhanced functionality
2. **Telemetry Integration**: Implement comprehensive observability for LLM calls, tool executions, user interactions, and system performance

These changes aim to improve user experience, enable data-driven decisions, and provide operational visibility into the chatbot system.

---

## 2. Goals & Objectives

### 2.1 UI Enhancement Goals

| Goal | Description | Priority |
|------|-------------|----------|
| **G1** | Modern, visually appealing interface | High |
| **G2** | Improved conversation UX | High |
| **G3** | Better image handling and preview | Medium |
| **G4** | Enhanced order management experience | Medium |
| **G5** | Mobile-responsive design | Low |
| **G6** | Accessibility compliance (WCAG 2.1) | Medium |

### 2.2 Telemetry Goals

| Goal | Description | Priority |
|------|-------------|----------|
| **T1** | Track LLM latency and token usage | High |
| **T2** | Monitor tool execution performance | High |
| **T3** | Capture user interaction patterns | Medium |
| **T4** | Error tracking and alerting | High |
| **T5** | Cost attribution per user/session | Medium |
| **T6** | Model performance analytics | Medium |

---

## 3. UI Enhancements Specification

### 3.1 Design System

#### 3.1.1 Color Palette

```
Primary Colors:
â”œâ”€â”€ Primary:      #2563EB (Blue 600)
â”œâ”€â”€ Primary Dark: #1D4ED8 (Blue 700)
â”œâ”€â”€ Secondary:    #10B981 (Emerald 500)
â””â”€â”€ Accent:       #F59E0B (Amber 500)

Neutral Colors:
â”œâ”€â”€ Background:   #F8FAFC (Slate 50)
â”œâ”€â”€ Surface:      #FFFFFF
â”œâ”€â”€ Border:       #E2E8F0 (Slate 200)
â”œâ”€â”€ Text Primary: #1E293B (Slate 800)
â””â”€â”€ Text Muted:   #64748B (Slate 500)

Semantic Colors:
â”œâ”€â”€ Success:      #22C55E (Green 500)
â”œâ”€â”€ Warning:      #EAB308 (Yellow 500)
â”œâ”€â”€ Error:        #EF4444 (Red 500)
â””â”€â”€ Info:         #3B82F6 (Blue 500)
```

#### 3.1.2 Typography

```
Font Family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif

Type Scale:
â”œâ”€â”€ Display:    2.5rem (40px) / 700 weight
â”œâ”€â”€ H1:         2rem (32px) / 600 weight
â”œâ”€â”€ H2:         1.5rem (24px) / 600 weight
â”œâ”€â”€ H3:         1.25rem (20px) / 600 weight
â”œâ”€â”€ Body:       1rem (16px) / 400 weight
â”œâ”€â”€ Small:      0.875rem (14px) / 400 weight
â””â”€â”€ Caption:    0.75rem (12px) / 400 weight
```

#### 3.1.3 Spacing System

```
Base unit: 4px

Scale:
â”œâ”€â”€ xs:  4px
â”œâ”€â”€ sm:  8px
â”œâ”€â”€ md:  16px
â”œâ”€â”€ lg:  24px
â”œâ”€â”€ xl:  32px
â””â”€â”€ 2xl: 48px
```

---

### 3.2 Component Specifications

#### 3.2.1 Chat Interface Redesign

**Current State:**
- Basic Streamlit chat input
- Plain message bubbles
- No visual distinction between message types

**Proposed Changes:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ›’ Retail Checkout Assistant                          [â‹®] [ğŸ””] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  [ğŸ“ 2 images attached]                                  â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Identify products in these shelf images and            â”‚   â”‚
â”‚  â”‚  tell me if any items need restocking.                   â”‚   â”‚
â”‚  â”‚                                                  12:34 PM â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          USER   â”‚
â”‚                                                                 â”‚
â”‚   ASSISTANT                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ”§ Using `detect_shelves` tool...                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Status: Complete âœ“                                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€ Found: 4 shelves                                    â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  ğŸ”§ Using `recognize_products` tool...                   â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Status: Complete âœ“                                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€ Identified: 23 products                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  **Detected Items**                                      â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  - Milk Ã— 5                                              â”‚   â”‚
â”‚  â”‚  - Chocolate Ã— 8                                         â”‚   â”‚
â”‚  â”‚  - Candy Ã— 4                                             â”‚   â”‚
â”‚  â”‚  - Instant Noodles Ã— 6                                   â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  âš ï¸ **Health Warnings**                                  â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  - Chocolate (8): Consider moderation...                 â”‚   â”‚
â”‚  â”‚  - Instant Noodles (6): High sodium...                   â”‚   â”‚
â”‚  â”‚                                                  12:35 PM â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  âš ï¸ Do you want me to proceed with this order? (yes/no)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“ â”‚  Type your message...                         [â¤]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- [ ] Distinct message bubbles with avatars
- [ ] Timestamp display
- [ ] Tool execution status cards with collapsible details
- [ ] Image thumbnail previews in messages
- [ ] Typing indicator animation
- [ ] Message reactions (ğŸ‘/ğŸ‘ for feedback)
- [ ] Copy message button
- [ ] Markdown rendering with syntax highlighting

---

#### 3.2.2 Sidebar Redesign

**Current State:**
- Basic thread list
- Simple file uploader
- Minimal styling

**Proposed Changes:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ›’ CHECKOUT BOT               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                â”‚
â”‚  ğŸ‘¤ raja@example.com           â”‚
â”‚     â–¼ Account                  â”‚
â”‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ ATTACHMENTS                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”       â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“·  â”‚ â”‚ ğŸ“·  â”‚  +    â”‚    â”‚
â”‚  â”‚  â”‚img1 â”‚ â”‚img2 â”‚       â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¬ CONVERSATIONS              â”‚
â”‚                                â”‚
â”‚  [+ New Chat]                  â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸŸ¢ Shelf Analysis       â”‚    â”‚
â”‚  â”‚    Today, 2:30 PM       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â—‹ Product Count         â”‚    â”‚
â”‚  â”‚    Yesterday            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â—‹ Empty Space Check     â”‚    â”‚
â”‚  â”‚    Jan 8                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“¦ Orders (3)                 â”‚
â”‚  âš™ï¸ Settings                   â”‚
â”‚  ğŸšª Logout                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- [ ] User profile section with avatar
- [ ] Image preview grid with drag-and-drop
- [ ] Thread cards with preview text and timestamp
- [ ] Active conversation indicator
- [ ] Thread search functionality
- [ ] Thread deletion with confirmation
- [ ] Quick navigation links

---

#### 3.2.3 Authentication View Redesign

**Current State:**
- Basic form layout
- Centered columns
- Minimal validation feedback

**Proposed Changes:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚           â”‚                                         â”‚           â”‚
â”‚           â”‚         ğŸ›’                              â”‚           â”‚
â”‚           â”‚    RETAIL CHECKOUT                      â”‚           â”‚
â”‚           â”‚       ASSISTANT                         â”‚           â”‚
â”‚           â”‚                                         â”‚           â”‚
â”‚           â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚           â”‚
â”‚           â”‚                                         â”‚           â”‚
â”‚           â”‚   [Login]  [Sign Up]                    â”‚           â”‚
â”‚           â”‚                                         â”‚           â”‚
â”‚           â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚           â”‚
â”‚           â”‚   â”‚  ğŸ“§ Email                       â”‚   â”‚           â”‚
â”‚           â”‚   â”‚  user@example.com               â”‚   â”‚           â”‚
â”‚           â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚           â”‚
â”‚           â”‚                                         â”‚           â”‚
â”‚           â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚           â”‚
â”‚           â”‚   â”‚  ğŸ”’ Password                    â”‚   â”‚           â”‚
â”‚           â”‚   â”‚  â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                   â”‚   â”‚           â”‚
â”‚           â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚           â”‚
â”‚           â”‚                                         â”‚           â”‚
â”‚           â”‚   [  â–¡ Remember me  ]                   â”‚           â”‚
â”‚           â”‚                                         â”‚           â”‚
â”‚           â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚           â”‚
â”‚           â”‚   â”‚          LOGIN â†’                â”‚   â”‚           â”‚
â”‚           â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚           â”‚
â”‚           â”‚                                         â”‚           â”‚
â”‚           â”‚   Forgot password?                      â”‚           â”‚
â”‚           â”‚                                         â”‚           â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                 â”‚
â”‚                   Powered by IIITH Capstone                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- [ ] Branded header with logo
- [ ] Animated tab transitions
- [ ] Input field icons
- [ ] Real-time validation feedback
- [ ] Password strength indicator (signup)
- [ ] "Remember me" functionality
- [ ] Password visibility toggle
- [ ] Loading states on buttons

---

#### 3.2.4 Orders Dashboard Redesign

**Current State:**
- Basic table view
- Simple expanders for details
- Minimal metrics

**Proposed Changes:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¦ My Orders                                              [ğŸ” Search]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     12        â”‚  â”‚     156       â”‚  â”‚    $1,234     â”‚  â”‚    â˜… 4.8    â”‚  â”‚
â”‚  â”‚  Total Orders â”‚  â”‚  Items Bought â”‚  â”‚  Total Spent  â”‚  â”‚   Rating    â”‚  â”‚
â”‚  â”‚    â†‘ 3 new    â”‚  â”‚               â”‚  â”‚               â”‚  â”‚             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Filter: [All â–¼]  [This Week â–¼]  [Sort: Newest â–¼]                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  #ORD-ABC123                                     Jan 10, 2026 2:30 PMâ”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”                              â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ¥›   â”‚  â”‚ ğŸ«   â”‚  â”‚ ğŸœ   â”‚  â”‚ +5   â”‚                              â”‚   â”‚
â”‚  â”‚  â”‚ Milk â”‚  â”‚Choco â”‚  â”‚Noodl â”‚  â”‚more  â”‚                              â”‚   â”‚
â”‚  â”‚  â”‚  Ã—5  â”‚  â”‚  Ã—8  â”‚  â”‚  Ã—6  â”‚  â”‚      â”‚                              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜                              â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  Total: 23 items                              [View Details] [â†»]     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  #ORD-XYZ789                                     Jan 9, 2026 11:15 AMâ”‚   â”‚
â”‚  â”‚  ...                                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  [Load More Orders]                                                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- [ ] Enhanced metrics dashboard
- [ ] Order cards with product thumbnails
- [ ] Filtering and sorting capabilities
- [ ] Order status badges
- [ ] Pagination or infinite scroll
- [ ] Order detail modal/drawer
- [ ] Re-order functionality
- [ ] Export orders to CSV

---

#### 3.2.5 Image Upload Enhancement

**Current State:**
- Basic file uploader
- No preview
- Files cleared on rerun

**Proposed Changes:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ UPLOAD IMAGES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                    â”‚    â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”                        â”‚    â”‚
â”‚  â”‚     â”‚  +  â”‚  Drag & drop images    â”‚    â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”˜  or click to browse    â”‚    â”‚
â”‚  â”‚                                    â”‚    â”‚
â”‚  â”‚     Supports: PNG, JPG, JPEG       â”‚    â”‚
â”‚  â”‚     Max: 10MB per file             â”‚    â”‚
â”‚  â”‚                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”  â”‚ â”‚  â”Œâ”€â”€â”€â”€â”  â”‚ â”‚  â”Œâ”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚    â”‚  â”‚ â”‚  â”‚    â”‚  â”‚ â”‚  â”‚    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ“· â”‚  â”‚ â”‚  â”‚ ğŸ“· â”‚  â”‚ â”‚  â”‚ ğŸ“· â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    â”‚  â”‚ â”‚  â”‚    â”‚  â”‚ â”‚  â”‚    â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”˜  â”‚ â”‚  â””â”€â”€â”€â”€â”˜  â”‚ â”‚  â””â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚ shelf1.jpgâ”‚ â”‚ shelf2.jpgâ”‚ â”‚ prod.png â”‚   â”‚
â”‚  â”‚   [Ã—]    â”‚ â”‚   [Ã—]    â”‚ â”‚   [Ã—]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                            â”‚
â”‚  3 files selected (2.4 MB total)           â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- [ ] Drag and drop support
- [ ] Image preview thumbnails
- [ ] File size validation
- [ ] Individual file removal
- [ ] Upload progress indicator
- [ ] Image zoom on click
- [ ] Batch processing status

---

### 3.3 Animation & Transitions

#### 3.3.1 Loading States

| Component | Animation Type | Duration |
|-----------|---------------|----------|
| Page Load | Skeleton shimmer | 300ms |
| Message Send | Slide up + fade | 200ms |
| Tool Execution | Pulse indicator | Continuous |
| Button Click | Scale down + up | 150ms |
| Tab Switch | Fade + slide | 250ms |

#### 3.3.2 Micro-interactions

- [ ] Button hover states with subtle shadows
- [ ] Input focus ring animations
- [ ] Message bubble entrance animation
- [ ] Tool status card progress animation
- [ ] Toast notification slide-in

---

### 3.4 Responsive Breakpoints

```
Mobile:       < 640px   (single column, collapsed sidebar)
Tablet:       640-1024px (sidebar overlay, adapted grid)
Desktop:      > 1024px  (full layout)
Large Screen: > 1440px  (max-width container)
```

---

## 4. Telemetry Specification

### 4.1 Telemetry Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           APPLICATION LAYER                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Streamlit  â”‚  â”‚ LangGraph   â”‚  â”‚    Tools    â”‚  â”‚     ML      â”‚        â”‚
â”‚  â”‚     UI      â”‚  â”‚    Flow     â”‚  â”‚  Execution  â”‚  â”‚  Inference  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                â”‚                â”‚                â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                   â”‚                                         â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                          â”‚ Telemetry SDK   â”‚                                â”‚
â”‚                          â”‚                 â”‚                                â”‚
â”‚                          â”‚ â€¢ Traces        â”‚                                â”‚
â”‚                          â”‚ â€¢ Metrics       â”‚                                â”‚
â”‚                          â”‚ â€¢ Logs          â”‚                                â”‚
â”‚                          â”‚ â€¢ Events        â”‚                                â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                   â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          TELEMETRY BACKEND                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Option A: OpenTelemetry + Self-Hosted                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Jaeger     â”‚    â”‚  Prometheus  â”‚    â”‚    Loki      â”‚                   â”‚
â”‚  â”‚  (Traces)    â”‚    â”‚  (Metrics)   â”‚    â”‚   (Logs)     â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                   â”‚                   â”‚                         â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                               â”‚                                             â”‚
â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚                       â”‚    Grafana    â”‚                                     â”‚
â”‚                       â”‚  (Dashboard)  â”‚                                     â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚  Option B: LangSmith (LLM-focused)                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          LangSmith                                    â”‚   â”‚
â”‚  â”‚  â€¢ LLM Traces    â€¢ Token Usage    â€¢ Prompt History    â€¢ Evaluations  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚  Option C: Hybrid (Recommended)                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚  LangSmith   â”‚    â”‚ OpenTelemetry â”‚                                       â”‚
â”‚  â”‚ (LLM-specificâ”‚    â”‚ (General App) â”‚                                       â”‚
â”‚  â”‚   telemetry) â”‚    â”‚   telemetry   â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.2 Data Points to Capture

#### 4.2.1 LLM Telemetry

| Metric | Type | Description | Tags |
|--------|------|-------------|------|
| `llm.request.duration` | Histogram | Time from request to response | model, thread_id |
| `llm.tokens.input` | Counter | Input tokens consumed | model, thread_id |
| `llm.tokens.output` | Counter | Output tokens generated | model, thread_id |
| `llm.tokens.total` | Counter | Total tokens | model, thread_id |
| `llm.cost.usd` | Gauge | Estimated cost per request | model, user_id |
| `llm.errors` | Counter | LLM API errors | model, error_type |
| `llm.tool_calls` | Counter | Number of tool calls made | tool_name, thread_id |

**Trace Attributes:**
```json
{
  "trace_id": "abc123",
  "span_id": "def456",
  "parent_span_id": "parent123",
  "thread_id": "uuid",
  "user_id": "uuid",
  "model": "gpt-5-nano",
  "temperature": 0.2,
  "prompt_tokens": 150,
  "completion_tokens": 89,
  "total_tokens": 239,
  "finish_reason": "stop",
  "latency_ms": 1234,
  "cost_usd": 0.0012
}
```

---

#### 4.2.2 Tool Execution Telemetry

| Metric | Type | Description | Tags |
|--------|------|-------------|------|
| `tool.execution.duration` | Histogram | Tool execution time | tool_name |
| `tool.execution.success` | Counter | Successful executions | tool_name |
| `tool.execution.failure` | Counter | Failed executions | tool_name, error_type |
| `tool.inference.duration` | Histogram | ML inference time | model_name |
| `tool.images.processed` | Counter | Images processed | tool_name |

**Trace Structure:**
```
LLM Request (Parent Span)
â”œâ”€â”€ Tool: detect_shelves (Child Span)
â”‚   â”œâ”€â”€ shelf_inference (Nested Span)
â”‚   â””â”€â”€ result_processing (Nested Span)
â”œâ”€â”€ Tool: recognize_products (Child Span)
â”‚   â”œâ”€â”€ crop_inference (Nested Span)
â”‚   â”œâ”€â”€ simclr_inference (Nested Span)
â”‚   â””â”€â”€ aggregation (Nested Span)
â””â”€â”€ Response Generation (Child Span)
```

---

#### 4.2.3 User Interaction Telemetry

| Event | Properties | Purpose |
|-------|------------|---------|
| `session.start` | user_id, timestamp | Track active users |
| `session.end` | user_id, duration, message_count | Session analytics |
| `message.sent` | thread_id, has_images, image_count | Usage patterns |
| `message.received` | thread_id, has_tool_calls, tool_names | Response analysis |
| `thread.created` | user_id, thread_id | Conversation tracking |
| `order.created` | user_id, order_id, item_count | Business metrics |
| `order.rejected` | user_id, thread_id | User behavior |
| `feedback.submitted` | message_id, rating, comment | Quality metrics |
| `image.uploaded` | file_size, file_type, count | Upload analytics |
| `error.displayed` | error_type, context | Error tracking |

---

#### 4.2.4 System Performance Telemetry

| Metric | Type | Description |
|--------|------|-------------|
| `app.request.duration` | Histogram | End-to-end request time |
| `app.active_sessions` | Gauge | Current active sessions |
| `db.query.duration` | Histogram | Database query times |
| `db.connections.active` | Gauge | Active DB connections |
| `cache.hit_rate` | Gauge | Streamlit cache effectiveness |
| `memory.usage_mb` | Gauge | Application memory |
| `model.load.duration` | Histogram | ML model load times |

---

### 4.3 Telemetry Implementation Details

#### 4.3.1 Instrumentation Points

```python
# Location: app/backend/langgraph_flow.py

# 1. Chatbot Node Entry
@trace_span("chatbot_node")
def chatbot_node(state: ChatState):
    with metrics.timer("llm.request.duration"):
        # ... existing code ...
    metrics.increment("llm.requests.total", tags={"model": "gpt-5-nano"})

# 2. Tool Execution
@trace_span("tool_execution")  
def tool_node(state: ChatState):
    for tool_call in tool_calls:
        with metrics.timer("tool.execution.duration", tags={"tool": tool_call.name}):
            # ... existing code ...

# 3. Inference Layer
@trace_span("ml_inference")
def run_inference(self, image_path: str):
    with metrics.timer("tool.inference.duration", tags={"model": "yolo"}):
        # ... existing code ...
```

#### 4.3.2 Context Propagation

```python
# Ensure trace context flows through async boundaries

class TelemetryContext:
    thread_id: str
    user_id: str
    session_id: str
    trace_id: str
    
    @classmethod
    def from_streamlit_session(cls):
        return cls(
            thread_id=st.session_state.get("thread_id"),
            user_id=st.session_state.get("user_id"),
            session_id=st.session_state.get("session_id"),
            trace_id=generate_trace_id()
        )
```

#### 4.3.3 Sampling Strategy

| Environment | Sampling Rate | Reason |
|-------------|--------------|--------|
| Development | 100% | Full visibility for debugging |
| Staging | 50% | Balance visibility and volume |
| Production | 10% + Errors | Cost control + full error capture |

---

### 4.4 Dashboard Specifications

#### 4.4.1 Real-time Operations Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š IIITH Chatbot - Operations Dashboard                    [Last 1 hour â–¼] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      47       â”‚  â”‚    1.2s       â”‚  â”‚    $0.89      â”‚  â”‚    99.2%    â”‚  â”‚
â”‚  â”‚ Active Users  â”‚  â”‚ Avg Latency   â”‚  â”‚  LLM Cost/hr  â”‚  â”‚  Success    â”‚  â”‚
â”‚  â”‚    â†‘ 12%      â”‚  â”‚    â†“ 0.3s     â”‚  â”‚    â†‘ $0.15    â”‚  â”‚    Rate     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Request Latency (p50, p95, p99)                                       â”‚ â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚ â”‚
â”‚  â”‚  â”‚    ___/\___/\___          p99: 3.2s                                â”‚ â”‚
â”‚  â”‚  â”‚___/            \_/\___    p95: 2.1s                                â”‚ â”‚
â”‚  â”‚  â”‚                       \__ p50: 1.2s                                â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Tool Usage Distribution     â”‚  â”‚  Error Rate by Type                  â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚ â”‚
â”‚  â”‚  recognize_products  â–ˆâ–ˆâ–ˆ 45% â”‚  â”‚  LLM Timeout    â–ˆâ–ˆ 2                 â”‚ â”‚
â”‚  â”‚  detect_shelves      â–ˆâ–ˆ  30% â”‚  â”‚  Tool Error     â–ˆ  1                 â”‚ â”‚
â”‚  â”‚  empty_shelf_%       â–ˆ   15% â”‚  â”‚  DB Connection  â–‘  0                 â”‚ â”‚
â”‚  â”‚  calculator          â–‘   10% â”‚  â”‚                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.4.2 LLM Analytics Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– LLM Performance Analytics                                [Last 24 hrs â–¼]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Token Usage Over Time                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                           ___                                          â”‚ â”‚
â”‚  â”‚              ___/\___    /   \                                         â”‚ â”‚
â”‚  â”‚  Input  ___/         \__/     \___/\___                                â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  Output  __/\__    /\__    __/\                                        â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚  00:00    04:00    08:00    12:00    16:00    20:00    24:00          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Daily Cost Breakdown        â”‚  â”‚  Model Performance                   â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚ â”‚
â”‚  â”‚  Total: $21.47               â”‚  â”‚  Avg Tokens/Req:    239              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  Avg Latency:       1.2s             â”‚ â”‚
â”‚  â”‚  â”‚ Input   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ $8.50 â”‚  â”‚  â”‚  Tool Call Rate:   78%              â”‚ â”‚
â”‚  â”‚  â”‚ Output  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  $12.97 â”‚  â”‚  â”‚  Retry Rate:       2.1%             â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  Cache Hit Rate:   34%              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.4.3 User Analytics Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¥ User Analytics                                           [Last 7 days â–¼]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     234       â”‚  â”‚    892        â”‚  â”‚     56        â”‚  â”‚    3.2      â”‚  â”‚
â”‚  â”‚  Total Users  â”‚  â”‚  Conversationsâ”‚  â”‚    Orders     â”‚  â”‚ Msgs/Sessionâ”‚  â”‚
â”‚  â”‚    â†‘ 23       â”‚  â”‚    â†‘ 156      â”‚  â”‚    â†‘ 12       â”‚  â”‚    â†‘ 0.4    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  User Engagement Funnel                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Sessions Started     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  234    â”‚ â”‚
â”‚  â”‚  Images Uploaded      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ               156     â”‚ â”‚
â”‚  â”‚  Products Recognized  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                     123     â”‚ â”‚
â”‚  â”‚  Orders Reviewed      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                          89      â”‚ â”‚
â”‚  â”‚  Orders Completed     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                56      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  Popular Product Categories (from orders)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Milk          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   234 items                        â”‚ â”‚
â”‚  â”‚  Chocolate     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ        189 items                        â”‚ â”‚
â”‚  â”‚  Instant Noodles â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ           145 items                        â”‚ â”‚
â”‚  â”‚  Drink         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ               112 items                        â”‚ â”‚
â”‚  â”‚  Candy         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                  89 items                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.5 Alerting Rules

| Alert | Condition | Severity | Action |
|-------|-----------|----------|--------|
| High Latency | p95 > 5s for 5min | Warning | Slack notification |
| Error Spike | Error rate > 5% for 2min | Critical | PagerDuty + Slack |
| LLM Cost Anomaly | Hourly cost > 2x average | Warning | Email + Slack |
| Tool Failures | Tool error rate > 10% | Critical | PagerDuty |
| Low Success Rate | Order success < 80% | Warning | Slack notification |
| High Token Usage | Tokens/request > 1000 | Info | Log for review |

---

## 5. Technical Requirements

### 5.1 Dependencies to Add

#### UI Dependencies
```python
# requirements.txt additions

# Custom CSS/Styling
streamlit-extras>=0.3.0        # Additional Streamlit components
streamlit-lottie>=0.0.5        # Animations

# Image handling
Pillow>=10.0.0                 # Image processing
streamlit-cropper>=0.2.1       # Image cropping (optional)
```

#### Telemetry Dependencies
```python
# requirements.txt additions

# OpenTelemetry
opentelemetry-api>=1.20.0
opentelemetry-sdk>=1.20.0
opentelemetry-exporter-otlp>=1.20.0
opentelemetry-instrumentation-logging>=0.41b0

# LangChain Telemetry
langsmith>=0.0.87              # LangSmith integration

# Metrics
prometheus-client>=0.17.0      # Prometheus metrics
```

### 5.2 Infrastructure Requirements

| Component | Requirement | Notes |
|-----------|-------------|-------|
| Telemetry Backend | Jaeger OR LangSmith | Choose based on needs |
| Metrics Store | Prometheus | Self-hosted or cloud |
| Dashboard | Grafana | Connect to Prometheus |
| Log Aggregation | Loki (optional) | Centralized logging |
| Alerting | Grafana Alerting | Or PagerDuty integration |

### 5.3 Environment Variables

```bash
# Telemetry Configuration
TELEMETRY_ENABLED=true
TELEMETRY_SAMPLE_RATE=0.1

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=iiith-chatbot

# LangSmith (if using)
LANGCHAIN_TRACING_V2=true
LANGCHAIN_API_KEY=your_langsmith_api_key
LANGCHAIN_PROJECT=iiith-chatbot

# Prometheus
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus
```

---

## 6. Implementation Phases

### Phase 1: Foundation (Week 1-2)

**UI:**
- [ ] Set up custom CSS theming system
- [ ] Implement design tokens (colors, typography, spacing)
- [ ] Create base component styles
- [ ] Refactor auth view with new design

**Telemetry:**
- [ ] Add OpenTelemetry SDK setup
- [ ] Configure basic tracing
- [ ] Add LLM request instrumentation
- [ ] Set up local Jaeger for development

### Phase 2: Core Features (Week 3-4)

**UI:**
- [ ] Redesign chat interface
- [ ] Implement message components (user, assistant, tool)
- [ ] Add image preview functionality
- [ ] Redesign sidebar

**Telemetry:**
- [ ] Add tool execution tracing
- [ ] Implement metrics collection
- [ ] Add user event tracking
- [ ] Create basic Grafana dashboard

### Phase 3: Enhancement (Week 5-6)

**UI:**
- [ ] Add animations and transitions
- [ ] Implement responsive design
- [ ] Redesign orders dashboard
- [ ] Add feedback mechanism

**Telemetry:**
- [ ] Implement cost tracking
- [ ] Add alerting rules
- [ ] Create analytics dashboards
- [ ] Add error tracking and alerts

### Phase 4: Polish & Documentation (Week 7)

**UI:**
- [ ] Cross-browser testing
- [ ] Accessibility audit
- [ ] Performance optimization
- [ ] Documentation

**Telemetry:**
- [ ] Dashboard refinement
- [ ] Runbook documentation
- [ ] Alert tuning
- [ ] Team training

---

## 7. Success Metrics

### 7.1 UI Success Metrics

| Metric | Current | Target | Measurement |
|--------|---------|--------|-------------|
| User Satisfaction | N/A | > 4.0/5.0 | In-app feedback |
| Task Completion Rate | N/A | > 90% | Order completion rate |
| Time to First Message | N/A | < 5s | Telemetry |
| Error Rate (UI) | N/A | < 1% | Error tracking |

### 7.2 Telemetry Success Metrics

| Metric | Target | Measurement |
|--------|--------|-------------|
| Trace Coverage | > 95% of requests | Sampling verification |
| Dashboard Load Time | < 3s | Grafana metrics |
| Alert Accuracy | < 5% false positives | Alert review |
| MTTR (Mean Time to Resolution) | < 30min | Incident tracking |

---

## 8. Risks & Mitigations

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| Streamlit CSS limitations | Medium | High | Use st.markdown with unsafe_allow_html |
| Telemetry overhead | Medium | Medium | Careful sampling, async export |
| LangSmith cost | Low | Medium | Set usage limits, evaluate alternatives |
| Dashboard performance | Low | Low | Query optimization, caching |
| Breaking changes during refactor | High | Medium | Feature flags, incremental rollout |

---

## 9. Open Questions

### 9.1 UI Questions

1. **Theme Preference**: Should we support dark mode from the start?
2. **Branding**: Do we have specific brand guidelines or logos to incorporate?
3. **Mobile Priority**: How important is mobile responsiveness for initial release?
4. **Accessibility Level**: Target WCAG 2.1 AA or AAA compliance?

### 9.2 Telemetry Questions

1. **Backend Choice**: Self-hosted (Jaeger/Prometheus) vs. managed (LangSmith/Datadog)?
2. **Data Retention**: How long should we retain telemetry data?
3. **PII Handling**: Should we mask user data in traces?
4. **Cost Budget**: What's the acceptable telemetry infrastructure cost?

### 9.3 General Questions

1. **Timeline**: Is the 7-week timeline realistic given team capacity?
2. **Prioritization**: If we need to cut scope, which features are must-have?
3. **Testing**: Do we need automated UI tests (Playwright/Selenium)?
4. **Rollout**: Big bang or gradual feature flag rollout?

---

## Appendix A: File Changes Summary

### New Files to Create

```
app/
â”œâ”€â”€ telemetry/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ tracer.py           # OpenTelemetry setup
â”‚   â”œâ”€â”€ metrics.py          # Prometheus metrics
â”‚   â”œâ”€â”€ events.py           # User event tracking
â”‚   â””â”€â”€ decorators.py       # @trace, @metrics decorators
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ styles.py           # CSS generation
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ chat_message.py
â”‚   â”‚   â”œâ”€â”€ tool_status.py
â”‚   â”‚   â”œâ”€â”€ image_uploader.py
â”‚   â”‚   â””â”€â”€ order_card.py
â”‚   â””â”€â”€ themes/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ light.py
â”‚       â””â”€â”€ dark.py
```

### Files to Modify

```
chatbot.py                    # UI refactor
views/auth_view.py            # Design update
pages/orders_dashboard.py     # Dashboard redesign
app/backend/langgraph_flow.py # Add telemetry
app/backend/chat_service.py   # Add telemetry
app/backend/tools.py          # Add telemetry
app/inference/*.py            # Add telemetry
```

---

## Appendix B: Reference Links

- [Streamlit Custom Theming](https://docs.streamlit.io/library/advanced-features/theming)
- [OpenTelemetry Python](https://opentelemetry.io/docs/instrumentation/python/)
- [LangSmith Documentation](https://docs.smith.langchain.com/)
- [Grafana Dashboard Best Practices](https://grafana.com/docs/grafana/latest/dashboards/best-practices/)
- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)

---

*Document Status: Draft - Pending Review*  
*Next Review Date: TBD*  
*Reviewers: [To be assigned]*
